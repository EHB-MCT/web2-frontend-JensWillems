(()=>{"use strict";mapboxgl.accessToken="pk.eyJ1IjoiamVuc3dpbGwiLCJhIjoiY2t1ejgxem9rM2dvajJ2cXJ1OGZjdGxrMCJ9.aoBP_WJJY4s28m07ieP6WQ";const e=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[5,50],zoom:6});e.on("load",(()=>{fetch("http://localhost:3000/api/markers").then((e=>e.json())).then((o=>{e.loadImage("../images/poppy_icon.png",((a,s)=>{if(a)throw a;e.addImage("poppy",s),e.addSource("places",{type:"geojson",data:{type:"FeatureCollection",features:o}}),e.addLayer({id:"places",type:"symbol",source:"places",layout:{"icon-image":"poppy","icon-size":.1,"icon-allow-overlap":!0}})}))})),e.on("click","places",(o=>{const a=o.features[0].geometry.coordinates.slice(),s=o.features[0].properties.description;for(;Math.abs(o.lngLat.lng-a[0])>180;)a[0]+=o.lngLat.lng>a[0]?360:-360;(new mapboxgl.Popup).setLngLat(a).setHTML(`  ${s} `).addTo(e)})),e.on("mouseenter","places",(()=>{e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","places",(()=>{e.getCanvas().style.cursor=""}))}))})();